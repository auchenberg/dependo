<html>
  <head>
    <title><%= title %></title>
    <style>
      <%= css %>
    </style>
  </head>

  <body>
    <div class="graph">
      <div class="control-zoom">
          <a class="control-zoom-in" href="#" title="Zoom in"></a>
          <a class="control-zoom-out" href="#" title="Zoom out"></a>
        </div>
    </div>
    <input type="button" class="save-layout" value="Save Layout" onclick="saveLayout();">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.0.1/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

    <script>
      var getGraphData = function() { return <%= graphData %>;};
      var basePath = "<%= basePath %>";
      var graphIdentification = "<%= graphID %>";
      var nodePositions = null; //replace with the object you find in console to persist node positions

      var getLayoutData = function() { return <%= layoutData %>;};
      if (getLayoutData()) {
        localStorage.setItem("dependo" + graphIdentification, JSON.stringify(getLayoutData()));
      }

      function saveLayout() {
        var b = new Blob([localStorage.getItem("dependo" + graphIdentification)], { type: 'application/json;charset=UTF-8;' });
        saveAs(b, "dependo-layout.json");
      }

      <%= jsgraph %>
      <%= jssaver %>
    </script>

  </body>
</html>
